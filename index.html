<head>
  <script src="https://unpkg.com/vue@2.1.5/dist/vue.js"></script>
  <script src="https://unpkg.com/vue-youtube-embed@1.0.0/lib/vue-youtube-embed.js"></script>
  <script src="https://unpkg.com/vue-resource@1.0.3/dist/vue-resource.js"></script>
  <script src='https://unpkg.com/underscore@1.8.3/underscore-min.js'></script>
  <script url='https://www.youtube.com/player_api'></script>
  <link href="css/app.css" rel="stylesheet" type="text/css">
  <link href="https://fonts.googleapis.com/css?family=Indie+Flower" rel="stylesheet">
  <style>
.pads{
  display: inline-block;
}
html{
  font-family: 'Indie Flower', cursive;
  background-color: pink;
}
.pads{
  text-align: center;
}
input{
  font-family: 'Indie Flower', cursive;
}
  [v-cloak] { display: none; }
  </style>
  <title>
    TS-17
  </title>
</head>
<section class="samplr">
  <header>
    <h1>TS-17</h1>
    <div class='add-sample' v-if='adding'>
    <input class="edit-half"
      autofocus autocomplete="off"
      placeholder="youtube id"
      v-model="newsample.id">
    <input class="edit-half"
      autofocus autocomplete="off"
      maxchars='1'
      placeholder="trigger // key"
      v-model="newsample.trigger">
    <input class="edit-half"
      autofocus autocomplete="off"
      placeholder="start time"
      type='number'
      @blur="addsample"
      v-model="newsample.start">
      <input class="edit-half"
        autofocus autocomplete="off"
        placeholder="end time"
        type='number'
        @blur="addsample"
        v-model="newsample.end">

      <button class='edit' v-on:click='addsample'>
        add sample
      </button>
    </div>
  </header>
  <button class='edit' v-on:click='adding = true'>
    new sample
  </button>
  <section class="main" v-show="samples.length" v-cloak>
    <ul class="sample-list">
      <span v-for="(sample, i) in filteredsamples"
        class="sample"
        :key="sample.id"
        :class="{ editing: sample == editedsample }">
        <div class="pads">
          <youtube :player-vars="{showinfo:0,modestbranding: 1,start:sample.start,clip_id:i,trigger: sample.trigger,controls:1 ,inline:1}" player-width="150" player-height="150" @ready='ready' :video-id='sample.id'></youtube>
          <button class="duplicate" @click="duplicate(sample)">+</button>
          <label @dblclick="editsample(sample)">{{sample.loop?'∞':'~'}} {{ sample.trigger }} {{sample.loop?'∞':'~'}} </label>
          <button class="destroy" @click="removesample(sample)">X</button>
        </div>
        <span class='editor'  v-if='editedsample && editedsample.trigger == sample.trigger'>
          <input class="edit-half" type="text"
            v-model="sample.id"
            placeholder="youtube ID">
          <button v-on:click='doneEdit(sample)' class='save'>
            (complete)
          </button>
        </span>
      </span>
    </ul>
  </section>
  <footer class="footer" v-cloak>
    <span class="sample-count">
      <strong>{{ remaining }}</strong> {{ remaining | pluralize }} registered
      <a v-show="samples.length" :href='serialized'>
        share link
      </a>
    </span>
  </footer>
</section>
<footer class="info">
  <p>Double-click a trigger(letter) to edit sample source</p>
  <p>shift-press trigger sets a new start time ~</p>
  <p>ctrl-press trigger sets end ~</p>
  <p>ctrl-shift-press trigger toggles loop ~</p>
  <a href='https://github.com/17thDimension/Toob-Samplr/issues/new'>issues?</a>
</footer>
<style>
.time{
  width:27px;
}
</style>
<script src='js/app.js'></script>
